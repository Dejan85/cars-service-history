generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Vehicle {
  id          String   @id @default(cuid())
  make        String
  model       String
  year        Int
  vin         String?  @unique
  plateNumber String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  services    Service[]
}

model Service {
  id              String   @id @default(cuid())
  vehicleId       String
  date            DateTime
  mileage         Int
  description     String
  cost            Float
  notes           String?
  isPreviousOwner Boolean  @default(false)
  isOffroad       Boolean  @default(false)
  isSmallService  Boolean  @default(false)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  vehicle         Vehicle  @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  items           ServiceItem[]
  
  @@index([vehicleId])
  @@index([date])
  @@index([isPreviousOwner])
  @@index([isOffroad])
  @@index([isSmallService])
}

model ServiceItem {
  id          String   @id @default(cuid())
  serviceId   String
  description String
  cost        Float?
  
  service     Service  @relation(fields: [serviceId], references: [id], onDelete: Cascade)
  
  @@index([serviceId])
}
